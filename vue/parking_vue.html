<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Live Parking</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/images/apple-touch-icon.png">
	<link rel="manifest" href="manifest.json">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="icon" type="image/x-icon" href="/images/favicon.ico">
	<!-- Import Vue.js -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/darkreader@4.9.58/darkreader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pulltorefreshjs/0.1.22/index.umd.min.js" integrity="sha512-djmgTiVR15A/7fON+ojDzFYrRsfVkzQZu07ZVb0zLC1OhA2iISP39Lzs05GqSKF0vPjkLzL5hBC+am6po7dKpA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<style>
		.card-header {
		    background-color: rgb(0, 61, 165);
		    color: white;
		}
		.progress-bar {
		    background-color: rgb(0, 61, 165);
		}
		.row-pad {
		    padding-bottom: 25px;
		}
		.parent { display: -ms-flex; display: -webkit-flex; display: flex; }
		.parent>div { flex:1; }
		
		.row {
		    margin-right: unset !important;
		    margin-left: unset !important;
		}
		
		.container, .container-fluid, .container-lg, .container-md, .container-sm, .container-xl, .container-xxl {
		    padding-right: unset !important;
		    padding-left: unset !important;
		}
		[v-cloak] {
		  display:none;
		}
		html, body {
		  overscroll-behavior-y: none;
		}
	</style>
</head>
  <body>
<div id="loading" style=" z-index: 99999; position: sticky; background: rgb(0, 61, 165); top: 0px; ">
<center>
	<h1 style="color:white">Working on it... Please wait</h1>
	<div class="spinner-border text-light" role="status">
	</div>
	<br/>
	<br/>
<!--<button class="btn btn-primary" id="submit_email" onclick="find()">SUBMIT</button>-->
</center>
</div>

<div id="error" style=" z-index: 99999; position: sticky; background: rgb(0, 61, 165); top: 0px; display:none ">
<center>
	<h1 style="color:white">Failed to fetch, refresh to try again.</h1>
	<button type="button" onClick="location.reload()" class="btn btn-primary">Try Again</button><br/>
	<br/>
<!--<button class="btn btn-primary" id="submit_email" onclick="find()">SUBMIT</button>-->
</center>
</div>
	  <br/>
    <div id="app">
	    <div id="lots" class="container-fluid row" v-cloak>
			<div v-for="lot in parkingLots" class="col-xs-12 col-sm-6 col-md-4 col-lg-3 row-pad parent">
			   <div class="card">
			      <h5 class="card-header" :style="'background:'+lot.color">
			         {{lot.name}}
			      </h5>
			      <div class="card-body">
			            <div v-html="'Location: ' + lot.locName"></div>
			            <div v-html="'Permit: ' + lot.permit"></div>
			            <div v-html="'Details: ' + lot.description"></div>
			            <div v-if="lot.locName == 'Lot 30'">
				            <img :src="'https://api.mapbox.com/styles/v1/mapbox/light-v10/static/-117.33062,33.9694365839775,15/500x350?before_layer=road-label&addlayer=%7B%22id%22%3A%22traffic%22%2C%22type%22%3A%22line%22%2C%22source%22%3A%7B%22type%22%3A%22vector%22%2C%22url%22%3A%22mapbox%3A%2F%2Fmapbox.mapbox-traffic-v1%22%7D%2C%22source-layer%22%3A%22traffic%22%2C%22paint%22%3A%7B%22line-color%22%3A%5B%22match%22%2C%5B%22get%22%2C%22congestion%22%5D%2C%22heavy%22%2C%22%23b82c2c%22%2C%22moderate%22%2C%22%23ed962b%22%2C%22low%22%2C%22%232eed2b%22%2C%22white%22%5D%2C%22line-width%22%3A3%7D%7D&access_token=pk.eyJ1Ijoia2V2aW5zb21lb25lIiwiYSI6ImNreWVhYzN5ZzEwemIydnBpbnN2M3dmdjMifQ.8TAIdDsrCfXZqAAzGFR2Rw&nocacheid='+Math.floor(Math.random() * 33333333)" style="width: 100%; object-fit: contain; ">
			            </div>
			      </div>
			      <div class="card-footer">
			         Spots Left: {{lot.locSpace}}/{{lot.locTotalSpaces}}<br/>
			         
			         <div v-if="lot.locSpace != 'FULL' " style="text-align: center;">{{'Occupancy: '+ Math.round(100-lot.locSpace/lot.locTotalSpaces*100)+'%'}}</div>
			         
			         <div v-else style="text-align: center;">{{'Occupancy: '+ '100%'}}</div>
			         
			         <div v-if="lot.locSpace != 'FULL' " class="progress">
			            <div class="progress-bar" role="progressbar" :style="'width:' + Math.round(100-lot.locSpace/lot.locTotalSpaces*100)+'%'" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
			         </div>
			         <div v-else class="progress">
			            <div class="progress-bar bg-danger" role="progressbar" style="width:100%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
			         </div>
			      </div>
			   </div>
			</div>
			<br/>
		</div>
    </div>

    <!-- Import App -->
    <script src="./main.js"></script>

    <!-- Mount App -->
    <script>
      const mountedApp = app.mount('#app');
      //dark reader
	DarkReader.auto({
	    brightness: 100,
	    contrast: 100
	});
	const ptr = PullToRefresh.init({
		  mainElement: 'body',
		  onRefresh() {
		    window.location.reload();
		  }
		});
    </script>
  </body>
</html>