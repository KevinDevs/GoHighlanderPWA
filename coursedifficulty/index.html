<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Course Difficulty Database</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/images/apple-touch-icon.png">
	<link rel="manifest" href="manifest.json">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="icon" type="image/x-icon" href="/images/favicon.ico">
	<!-- Import Vue.js -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/darkreader@4.9.58/darkreader.min.js"></script>
	<style>
		.card-header {
		    background-color: rgb(0, 61, 165);
		    color: white;
		}
		.progress-bar {
		    background-color: rgb(0, 61, 165);
		}
		.row-pad {
		    padding-bottom: 25px;
		}
		.parent { display: -ms-flex; display: -webkit-flex; display: flex; }
		.parent>div { flex:1; }
		
		.row {
		    margin-right: unset !important;
		    margin-left: unset !important;
		}
		
		.container, .container-fluid, .container-lg, .container-md, .container-sm, .container-xl, .container-xxl {
		    padding-right: unset !important;
		    padding-left: unset !important;
		}
		[v-cloak] {
		  display:none;
		}
		html, body {
		  overscroll-behavior-y: none;
		}
	</style>
</head>
  <body>
    <div id="app">
	    
	   
            
            <div class="row" style="z-index: 99998;position: sticky;background: rgb(0, 61, 165);padding: 10px;top: 0;">
	            <br/>
                 <div class="search-wrapper panel-heading col-sm-12">
                     <!--<input class="form-control" type="text" v-model="searchQuery" placeholder="Search" style=" -ms-transform: translateY(-50%); margin: 0; position: absolute; top: 30%;; left: 50%; -ms-transform: translate(-50%, -50%); transform: translate(-50%, -50%); width: 90%; " />-->
                     <div class="input-group mb-3" id="searchColomn" style="">
					<input type="text" id="myInput" class="form-control" v-model="searchQuery" placeholder="Search" title="Search" >
						<div class="input-group-append">
							<button type="button" class="btn" id="basic-addon2" style=" background: #0d6efd; " onclick="document.getElementById('myInput').value = '';" @click="clearInput()"><font style=" color: #ffffff; ">X</font></button>
						</div>
					</div>
                </div>                        
            </div>
            <br/>
         
         
	    <div id="lots" class="container-fluid row" v-cloak>
			<div v-for="loc in resultQuery" class="col-xs-12 col-sm-6 col-md-4 col-lg-3 row-pad parent">
			   <div class="card">
			      <h5 class="card-header">
			         {{loc[0]}}
			      </h5>
			      <div class="card-body">
			            
			            <template v-if="loc[1]">
			            <template v-if="courseData[loc[0]]">
			            <div v-html="'Reviews: ' + (courseData[loc[0]].length + 1)"></div>
			            <br/>
			            </template>
			            
			            <template v-else>
			            <div v-html="'Reviews: 1'"></div>
			            <br/>
			            </template>
			            
			            
			            <div v-html="'Average Difficulty: ' + Math.round(loc[1] * 100) / 100 + '/10'"></div><br/>
			            
			            
			            <div class="progress">
						  <div class="progress-bar bg-danger" role="progressbar" :style="'width:' + (loc[1]/10)*100 +'%'" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
						</div>
						</template>
						<template v-else>
							No Comment Yet / Other Course Code Available
						</template>
			      </div>
			      <div class="card-footer">
			      
			      
					<!-- Button trigger modal -->
						<template v-if="loc[1]">
<button type="button" class="btn btn-primary btn-sm btn-block" data-bs-toggle="modal" :data-bs-target="'#exampleModal'+loc[0]">
  Reviews
</button>
	</template>

<!-- Modal -->
<div class="modal fade" :id="'exampleModal'+loc[0]" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style="z-index: 99999;">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Reviews</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
      <b>Review:</b><br/>
        {{loc[2]}}
        <template v-if="loc[3]">
        <br/>
        <br/>
        Rated Difficulty: {{loc[3]}}/10
	        <div class="progress">
					<div class="progress-bar bg-danger" role="progressbar" :style="'width:' + (loc[3]/10)*100 +'%'" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
			</div>
        </template>
        <template v-if="loc[4]">
        <br/>
        Date: {{loc[4]}}
        
        </template>
	    <template v-if="courseData[loc[0]]">
        <hr/>
	    </template>
        <template v-for="revs in courseData[loc[0]]">
        <b>Review:</b><br/>
        	{{revs[2]}}
	        <template v-if="revs[3]">
	        	<br/>
		        <br/>
		        Rated Difficulty: {{revs[3]}}/10
			    <div class="progress">
					<div class="progress-bar bg-danger" role="progressbar" :style="'width:' + (revs[3]/10)*100 +'%'" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
				</div>
		    </template>
	        <template v-if="revs[4]">
	        <br/>
	        Date: {{revs[4]}}
	        
			
	        </template>
			<hr/>
        </template>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
			      &nbsp
			      
			         <a type="button" target="_blank" :onclick="'modalFrameGo(&quot;'+'https://utils.gohighlander.app/courses/courses_paramsv2.html?course='+loc[0]+'&quot;)'" class="btn btn-primary btn-sm btn-block">View Sections</a>
			         
			         
			      </div>
			   </div>
			</div>
			<br/>
		</div>
		
		
		
    </div>
    
    <!-- Modal -->
<div class="modal fade" id="iframeModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style="z-index: 99999;">
  <div class="modal-dialog modal-dialog-centered modal-fullscreen">
    <div class="modal-content">
     <!-- <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Sections</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>-->
      <div class="modal-body" style="padding: 0rem;">
        <iframe id="frame" src="" frameborder="0" width="100%" height="100%"></iframe>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

    <!-- Import App -->
    <script src="./main.js"></script>

    <!-- Mount App -->
    <script>
      const mountedApp = app.mount('#app');
	 
	$('#myModal').on('shown.bs.modal', function () {
	  $('#myInput').trigger('focus')
	})
	
	function modalFrameGo(url){
		$('#iframeModal').modal("show");
		//document.getElementById("frame").src = url;
		document.getElementById("frame").contentWindow.location.replace(url);
	}
	
	//dark reader
	DarkReader.auto({
	    brightness: 100,
	    contrast: 100
	});
	
	//swipe right detection
document.addEventListener('swiped-right', function(e) {
			   window.parent.$('#iframeModal').modal('hide');
            });
    </script>
    <script src="/pwa/swipe.js"></script>
  </body>
</html>